!function(e,a,s,i){e.fn.pageFun=function(a){var s={pageDiv:e(this).find(".pageDiv"),pageDivLi:e(this).find(".pageDiv li"),page:e(this).find(".page"),pageMenu:e(this).find(".pageMenu"),pageMenuLi:e(this).find(".pageDiv li"),firstPage:e(this).find(".firstPage"),prevPage:e(this).find(".prevPage"),pageNum:e(this).find(".pageNum"),nextPage:e(this).find(".nextPage"),pageObj:e(this).find(".pageObj"),pageObjLi:e(this).find(".pageObj li"),lastPage:e(this).find(".lastPage"),keuInput:e(this).find(".keuInput"),btnSure:e(this).find(".btnSure"),notContent:e(this).find(".notContent"),totalPage:e(this).find(".totalPage"),pNum:1,lastNum:0,cacheNum:1,min:0,res:null},i=e.extend({},s,a),d={init:function(){d.getData(),d.handleEvent()},getData:function(){e.getJSON(i.interFace,function(e){if("ok"==e.status){if(i.res=e.datas,i.res.length<=i.displayCount&&i.res.length>0)i.displayCount=i.res.length,i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled");else{if(0==i.res.length)return i.notContent.removeClass("hide"),i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled"),i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"),i.firstPage.off("click"),i.lastPage.off("click"),i.prevPage.off("click"),void i.nextPage.off("click");i.pNum=Math.ceil(i.res.length/i.displayCount)}i.notContent.addClass("hide");for(var a=0;a<i.displayCount;a++)i.pageDiv.append(i.dataFun(i.res[a]));for(var a=0;a<i.pNum;a++)i.pageObj.append(i.pageFun(a+1));i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled"),i.pageObj.find("li:first-child").addClass("active"),i.totalPage.text(i.pNum),d.showPageindex(0,i.maxPage,0)}})},handleEvent:function(){i.pageObj.on("click","li",function(){if(e(this).addClass("active"),i.pageDiv.empty(),e(this).siblings("li").removeClass("active"),i.cacheNum=e(this).text(),1==e(this).text()){if(i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled"),i.lastPage.removeClass("disabled"),i.nextPage.removeClass("disabled"),1==i.pNum)return i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"),void d.xhhtml(e(this).text(),i.res.length)}else if(e(this).text()==i.pNum){if(i.firstPage.removeClass("disabled"),i.prevPage.removeClass("disabled"),i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"),i.res.length<i.displayCount*i.pNum)return void d.xhhtml(e(this).text(),i.res.length)}else i.firstPage.removeClass("disabled"),i.prevPage.removeClass("disabled"),i.lastPage.removeClass("disabled"),i.nextPage.removeClass("disabled");d.showPageindex(0,i.maxPage,e(this).text()),d.xhhtml(e(this).text(),e(this).text()*i.displayCount)}),i.prevPage.on("click",function(){1!=i.cacheNum&&(2==i.cacheNum&&(i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled")),i.pageDiv.empty(),i.cacheNum--,i.lastPage.removeClass("disabled"),i.nextPage.removeClass("disabled"),e(".pageObj li").eq(i.cacheNum-1).addClass("active"),e(".pageObj li").eq(i.cacheNum-1).siblings("li").removeClass("active"),d.xhhtml(i.cacheNum,i.cacheNum*i.displayCount),d.showPageindex(0,i.maxPage,i.cacheNum))}),i.nextPage.on("click",function(){i.cacheNum!=i.pNum&&(i.pageDiv.empty(),i.cacheNum++,e(".pageObj li").eq(i.cacheNum-1).addClass("active"),e(".pageObj li").eq(i.cacheNum-1).siblings("li").removeClass("active"),i.cacheNum==i.pNum?(i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"),d.xhhtml(i.cacheNum,i.res.length)):(d.xhhtml(i.cacheNum,i.cacheNum*i.displayCount),i.firstPage.removeClass("disabled"),i.prevPage.removeClass("disabled")),d.showPageindex(0,i.maxPage,i.cacheNum))}),i.firstPage.on("click",function(){i.pageDiv.empty(),i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled"),i.lastPage.removeClass("disabled"),i.nextPage.removeClass("disabled"),e(".pageObj li").eq(0).addClass("active"),e(".pageObj li").eq(0).siblings("li").removeClass("active"),d.xhhtml(1,i.displayCount),i.cacheNum=1,d.showPageindex(0,i.maxPage,0)}),i.lastPage.on("click",function(){i.pageDiv.empty(),i.firstPage.removeClass("disabled"),i.prevPage.removeClass("disabled"),i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"),e(".pageObj li").eq(i.pNum-1).addClass("active"),e(".pageObj li").eq(i.pNum-1).siblings("li").removeClass("active"),i.cacheNum=i.pNum,d.xhhtml(i.pNum,i.res.length),d.showPageindex(0,i.maxPage,i.pNum)}),i.btnSure.on("click",function(){var a=i.keuInput.val();if(""==a||a<=0)return i.keuInput.val(1),void alert("请输入有效页码");if(Number(a)>i.pNum)return void alert("共"+i.pNum+"页");if(i.pageDiv.empty(),e(".pageObj li").eq(a-1).addClass("active"),e(".pageObj li").eq(a-1).siblings("li").removeClass("active"),i.cacheNum=a,d.showPageindex(0,i.maxPage,a),"1"==a)i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled"),i.lastPage.removeClass("disabled"),i.nextPage.removeClass("disabled"),1==i.pNum&&(i.firstPage.addClass("disabled"),i.prevPage.addClass("disabled"),i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"));else{if(a==i.pNum)return i.firstPage.removeClass("disabled"),i.prevPage.removeClass("disabled"),i.lastPage.addClass("disabled"),i.nextPage.addClass("disabled"),void d.xhhtml(a,i.res.length);i.firstPage.removeClass("disabled"),i.prevPage.removeClass("disabled"),i.lastPage.removeClass("disabled"),i.nextPage.removeClass("disabled")}d.xhhtml(a,a*i.displayCount)})},xhhtml:function(e,a){for(var s=(e-1)*i.displayCount;s<a;s++)i.pageDiv.append(i.dataFun(i.res[s]));i.keuInput.val(e)},showPageindex:function(a,s,d){d<=Math.ceil(s/2)?(a=0,s=s):i.pNum-d<Math.ceil(s/2)?(a=i.pNum-s,s=i.pNum):(a=Math.round(d-s/2)-1,s=Math.round(Number(d)+Number(s/2))-1),e(".pageObj li").hide();for(var l=a;l<s;l++)e(".pageObj li").eq(l).show()}};d.init()}}(jQuery,window,document);